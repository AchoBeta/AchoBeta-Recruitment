<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.achobeta.domain.recruit.model.dao.mapper.ActivityParticipationMapper">

    <select id="getQuestions" parameterType="java.lang.Long" resultType="com.achobeta.domain.recruit.model.vo.QuestionAnswerVO">
        select
            q.id, q.title, pq.answer
        from
            activity_participation ap
            left join participation_question_link pq on ap.id = pq.participation_id and ap.is_deleted = 0 and pq.is_deleted = 0
            left join question q on pq.question_id = q.id and pq.is_deleted = 0 and q.is_deleted = 0
        where ap.id = #{participationId,jdbcType=BIGINT}
        order by pq.create_time
    </select>

    <select id="getPeriods" parameterType="java.lang.Long" resultType="com.achobeta.domain.recruit.model.vo.TimePeriodVO">
        select
            t.id, t.start_time, t.end_time
        from
            activity_participation ap
            left join participation_period_link pp on ap.id = pp.participation_id and ap.is_deleted = 0 and pp.is_deleted = 0
            left join time_period t on pp.period_id = t.id and pp.is_deleted = 0 and t.is_deleted = 0
        where ap.id = #{participationId,jdbcType=BIGINT}
        order by pp.create_time
    </select>
</mapper>
